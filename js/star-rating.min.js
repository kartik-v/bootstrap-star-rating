/*!
 * @copyright &copy; Kartik Visweswaran, Krajee.com, 2013 - 2016
 * @version 4.0.1
 *
 * A simple yet powerful JQuery star rating plugin that allows rendering fractional star ratings and supports
 * Right to Left (RTL) input.
 * 
 * For more JQuery plugins visit http://plugins.krajee.com
 * For more Yii related demos visit http://demos.krajee.com
 */!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(window.jQuery)}(function(e){"use strict";e.fn.ratingLocales={};var t,a,n,i,r,l,o,s,c,u,h;t=".rating",a=0,n=5,i=.5,r=function(t,a){return null===t||void 0===t||0===t.length||a&&""===e.trim(t)},l=function(e,t){return e?" "+t:""},o=function(e,t){e.removeClass(t).addClass(t)},s=function(e){var t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},c=function(e,t){return parseFloat(e.toFixed(t))},u=function(e,a,n,i){var r=i?a:a.split(" ").join(t+" ")+t;e.off(r).on(r,n)},h=function(t,a){this.$element=e(t),this.init(a)},h.prototype={constructor:h,_parseAttr:function(e,t){var l,o,s,c,u=this,h=u.$element,d=h.attr("type");if("range"===d||"number"===d){switch(o=t[e]||h.data(e)||h.attr(e),e){case"min":s=a;break;case"max":s=n;break;default:s=i}l=r(o)?s:o,c=parseFloat(l)}else c=parseFloat(t[e]);return isNaN(c)?s:c},setDefault:function(e,t){var a=this;r(a[e])&&(a[e]=t)},listenClick:function(e,t){return e.stopPropagation(),e.preventDefault(),e.handled===!0?!1:(t(e),void(e.handled=!0))},starClick:function(e){var t,a=this;a.listenClick(e,function(e){return a.inactive?!1:(t=a.getPosition(e),a.setStars(t),a.$element.trigger("change").trigger("rating.change",[a.$element.val(),a.getCaption()]),void(a.starClicked=!0))})},starMouseMove:function(e){var t,a,n=this;!n.hoverEnabled||n.inactive||e&&e.isDefaultPrevented()||(n.starClicked=!1,t=n.getPosition(e),a=n.calculate(t),n.toggleHover(a),n.$element.trigger("rating.hover",[a.val,a.caption,"stars"]))},starMouseLeave:function(e){var t,a=this;!a.hoverEnabled||a.inactive||a.starClicked||e&&e.isDefaultPrevented()||(t=a.cache,a.toggleHover(t),a.$element.trigger("rating.hoverleave",["stars"]))},clearClick:function(e){var t=this;t.listenClick(e,function(){t.inactive||(t.clear(),t.clearClicked=!0)})},clearMouseMove:function(e){var t,a,n,i,r=this;!r.hoverEnabled||r.inactive||!r.hoverOnClear||e&&e.isDefaultPrevented()||(r.clearClicked=!1,t='<span class="'+r.clearCaptionClass+'">'+r.clearCaption+"</span>",a=r.clearValue,n=r.getWidthFromValue(a)||0,i={caption:t,width:n,val:a},r.toggleHover(i),r.$element.trigger("rating.hover",[a,t,"clear"]))},clearMouseLeave:function(e){var t,a=this;!a.hoverEnabled||a.inactive||a.clearClicked||!a.hoverOnClear||e&&e.isDefaultPrevented()||(t=a.cache,a.toggleHover(t),a.$element.trigger("rating.hoverleave",["clear"]))},resetForm:function(e){var t=this;e&&e.isDefaultPrevented()||t.inactive||t.reset()},setTouch:function(e,t){var a,n,i,l,o,s,c,u=this,h="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch;h&&!u.inactive&&(a=e.originalEvent,n=r(a.touches)?a.changedTouches:a.touches,i=u.getPosition(n[0]),t?(u.setStars(i),u.$element.trigger("change").trigger("rating.change",[u.$element.val(),u.getCaption()]),u.starClicked=!0):(l=u.calculate(i),o=l.val<=u.clearValue?u.fetchCaption(u.clearValue):l.caption,s=u.getWidthFromValue(u.clearValue),c=l.val<=u.clearValue?s+"%":l.width,u.setCaption(o),u.$filledStars.css("width",c)))},initTouch:function(e){var t=this,a="touchend"===e.type;t.setTouch(e,a)},initSlider:function(e){var t=this;r(t.$element.val())&&t.$element.val(0),t.initialValue=t.$element.val(),t.setDefault("min",t._parseAttr("min",e)),t.setDefault("max",t._parseAttr("max",e)),t.setDefault("step",t._parseAttr("step",e)),(isNaN(t.min)||r(t.min))&&(t.min=a),(isNaN(t.max)||r(t.max))&&(t.max=n),(isNaN(t.step)||r(t.step)||0===t.step)&&(t.step=i),t.diff=t.max-t.min},initHighlight:function(e){var t,a=this,n=a.getCaption();e||(e=a.$element.val()),t=a.getWidthFromValue(e)+"%",a.$filledStars.width(t),a.cache={caption:n,width:t,val:e}},init:function(t){var a=this,n=a.$element.addClass("hide");a.options=t,e.each(t,function(e,t){a[e]=t}),(a.rtl||"rtl"===n.attr("dir"))&&(a.rtl=!0,n.attr("dir","rtl")),a.starClicked=!1,a.clearClicked=!1,a.initSlider(t),a.checkDisabled(),a.displayOnly&&(a.inactive=!0,a.showClear=!1,a.showCaption=!1),a.generateRating(),a.listen(),n.removeClass("rating-loading")},listen:function(){var t=this,a=t.$element.closest("form"),n=t.$rating,i=t.$clear;u(n,"touchstart touchmove touchend",e.proxy(t.initTouch,t)),u(n,"click touchstart",e.proxy(t.starClick,t)),u(n,"mousemove",e.proxy(t.starMouseMove,t)),u(n,"mouseleave",e.proxy(t.starMouseLeave,t)),t.showClear&&i.length&&(u(i,"click touchstart",e.proxy(t.clearClick,t)),u(i,"mousemove",e.proxy(t.clearMouseMove,t)),u(i,"mouseleave",e.proxy(t.clearMouseLeave,t))),a.length&&u(a,"reset",e.proxy(t.resetForm,t))},destroy:function(){var t=this,a=t.$element;r(t.$container)||t.$container.before(a).remove(),e.removeData(a.get(0)),a.off("rating").removeClass("hide")},create:function(e){var t=this,a=t.$element;e=e||t.options||{},t.destroy(),a.rating(e)},getContainerCss:function(){var e=this;return"rating-container"+l(e.theme,"theme-"+e.theme)+l(e.rtl,"rating-rtl")+l(e.size,"rating-"+e.size)+l(e.animate,"rating-animate")+l(e.disabled||e.readonly,"rating-disabled")+l(e.containerClass,e.containerClass)},checkDisabled:function(){var e=this,t=e.$element,a=e.options;e.disabled=void 0===a.disabled?t.attr("disabled")||!1:a.disabled,e.readonly=void 0===a.readonly?t.attr("readonly")||!1:a.readonly,e.inactive=e.disabled||e.readonly,t.attr({disabled:e.disabled,readonly:e.readonly})},addContent:function(e,t){var a=this,n=a.$container,i="clear"===e;return a.rtl?i?n.append(t):n.prepend(t):i?n.prepend(t):n.append(t)},generateRating:function(){var t,a,n,i=this,r=i.$element;void 0!==i.$container&&i.$container.before(i.$element).remove(),a=i.$container=e(document.createElement("div")).insertBefore(r),o(a,i.getContainerCss()),i.$rating=t=e(document.createElement("div")).attr("class","rating").appendTo(a).append(i.getStars("empty")).append(i.getStars("filled")),i.$emptyStars=t.find(".empty-stars"),i.$filledStars=t.find(".filled-stars"),i.renderCaption(),i.renderClear(),i.initHighlight(),a.append(r),i.rtl&&(n=Math.max(i.$emptyStars.outerWidth(),i.$filledStars.outerWidth()),i.$emptyStars.width(n))},getPosition:function(e){var t=r(e.pageX)?e.originalEvent.touches[0].pageX:e.pageX;return t-this.$rating.offset().left},getValueFromPosition:function(e){var t,a,n=this,i=s(n.step),r=n.$rating.width();return a=n.diff*e/(r*n.step),a=n.rtl?Math.floor(a):Math.ceil(a),t=c(parseFloat(n.min+a*n.step),i),t=Math.max(Math.min(t,n.max),n.min),n.rtl?n.max-t:t},getWidthFromValue:function(e){var t,a,n=this,i=n.min,r=n.max,l=n.$emptyStars;return!e||i>=e||i===r?0:(a=l.outerWidth(),t=a?l.width()/a:1,e>=r?100:(e-i)*t*100/(r-i))},getStars:function(e){var t,a=this,n='<span class="'+e+'-stars">';for(t=1;t<=a.stars;t++)n+='<span class="star">'+a[e+"Star"]+"</span>";return n+"</span>"},getClearClass:function(){return this.clearButtonBaseClass+" "+(this.inactive?"":this.clearButtonActiveClass)},renderClear:function(){var t,a=this,n=a.clearElement?e(a.clearElement):"";if(a.showClear){if(t=a.getClearClass(),n.length)return o(n,t),n.attr({title:a.clearButtonTitle}).html(a.clearButton),void(a.$clear=n);a.addContent("clear",'<div class="'+t+'" title="'+a.clearButtonTitle+'">'+a.clearButton+"</div>"),a.$clear=a.$container.find("."+a.clearButtonBaseClass)}},validateClear:function(){var e=this,t=e.$clear;return t&&t.length?(t.off(),e.showClear?t.show():t.hide()):null},validateCaption:function(){var e=this,t=e.$caption;return t&&t.length?e.showCaption?t.show():t.hide():null},renderCaption:function(){var t,a=this,n=a.$element.val(),i=a.captionElement?e(a.captionElement):"";if(a.showCaption){if(t=a.fetchCaption(n),i&&i.length)return o(i,"caption"),i.html(t),void(a.$caption=i);a.addContent("caption",'<div class="caption">'+t+"</div>"),a.$caption=a.$container.find(".caption")}},getCaption:function(){var e=this;return e.$caption&&e.$caption.length?e.$caption.html():e.defaultCaption},setCaption:function(e){var t=this;t.$caption&&t.$caption.length&&t.$caption.html(e)},fetchCaption:function(e){var t,a,n,i,l,o=this,u=parseFloat(e)||o.clearValue,h=o.starCaptions,d=o.starCaptionClasses;return u&&u!==o.clearValue&&(u=c(u,s(o.step))),i="function"==typeof d?d(u):d[u],n="function"==typeof h?h(u):h[u],a=r(n)?o.defaultCaption.replace(/\{rating}/g,u):n,t=r(i)?o.clearCaptionClass:i,l=u===o.clearValue?o.clearCaption:a,'<span class="'+t+'">'+l+"</span>"},toggleHover:function(e){var t,a,n,i=this;e&&(i.hoverChangeStars&&(t=i.getWidthFromValue(i.clearValue),a=e.val<=i.clearValue?t+"%":e.width,i.$filledStars.css("width",a)),i.hoverChangeCaption&&(n=e.val<=i.clearValue?i.fetchCaption(i.clearValue):e.caption,n&&i.setCaption(n+"")))},calculate:function(e){var t=this,a=r(t.$element.val())?0:t.$element.val(),n=arguments.length?t.getValueFromPosition(e):a,i=t.fetchCaption(n),l=t.getWidthFromValue(n);return l+="%",{caption:i,width:l,val:n}},setStars:function(e){var t=this,a=arguments.length?t.calculate(e):t.calculate();t.$element.val(a.val),t.$filledStars.css("width",a.width),t.setCaption(a.caption),t.cache=a},clear:function(){var e=this,t=e.$element,a='<span class="'+e.clearCaptionClass+'">'+e.clearCaption+"</span>";e.inactive||e.setCaption(a),t.val(e.clearValue),e.setStars(),t.trigger("change").trigger("rating.clear")},reset:function(){var e=this,t=e.$element;t.val(e.initialValue),e.setStars(),t.trigger("rating.reset")},update:function(e){var t=this;arguments.length&&(t.$element.val(e),t.setStars())},refresh:function(t){var a=this;arguments.length&&(a.$rating.off("rating"),a.init(e.extend(!0,a.options,t)),a.validateClear(),a.validateCaption(),a.$element.trigger("rating.refresh"))}},e.fn.rating=function(t){var a=Array.apply(null,arguments),n=[];switch(a.shift(),this.each(function(){var i,l=e(this),o=l.data("rating"),s="object"==typeof t&&t,c=s.language||l.data("language")||"en",u={};o||("en"===c||r(e.fn.ratingLocales[c])||(u=e.fn.ratingLocales[c]),i=e.extend(!0,{},e.fn.rating.defaults,e.fn.ratingLocales.en,u,s,l.data()),o=new h(this,i),l.data("rating",o)),"string"==typeof t&&n.push(o[t].apply(o,a))}),n.length){case 0:return this;case 1:return n[0];default:return n}},e.fn.rating.defaults={theme:"",language:"en",stars:5,filledStar:'<i class="glyphicon glyphicon-star"></i>',emptyStar:'<i class="glyphicon glyphicon-star-empty"></i>',containerClass:"",size:"md",animate:!0,displayOnly:!1,rtl:!1,showClear:!0,showCaption:!0,starCaptionClasses:{.5:"label label-danger",1:"label label-danger",1.5:"label label-warning",2:"label label-warning",2.5:"label label-info",3:"label label-info",3.5:"label label-primary",4:"label label-primary",4.5:"label label-success",5:"label label-success"},clearButton:'<i class="glyphicon glyphicon-minus-sign"></i>',clearButtonBaseClass:"clear-rating",clearButtonActiveClass:"clear-rating-active",clearCaptionClass:"label label-default",clearValue:null,captionElement:null,clearElement:null,hoverEnabled:!0,hoverChangeCaption:!0,hoverChangeStars:!0,hoverOnClear:!0},e.fn.ratingLocales.en={defaultCaption:"{rating} Stars",starCaptions:{.5:"Half Star",1:"One Star",1.5:"One & Half Star",2:"Two Stars",2.5:"Two & Half Stars",3:"Three Stars",3.5:"Three & Half Stars",4:"Four Stars",4.5:"Four & Half Stars",5:"Five Stars"},clearButtonTitle:"Clear",clearCaption:"Not Rated"},e.fn.rating.Constructor=h,e(document).ready(function(){var t=e("input.rating");t.length&&t.removeClass("rating-loading").addClass("rating-loading").rating()})});